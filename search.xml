<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>我的LeetCode之旅「除数博弈」</title>
      <link href="/wo-de-leetcode-zhi-lu-chu-shu-bo-yi/"/>
      <url>/wo-de-leetcode-zhi-lu-chu-shu-bo-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="一、题目描述"><a href="#一、题目描述" class="headerlink" title="一、题目描述"></a>一、题目描述</h1><p>爱丽丝和鲍勃一起玩游戏，他们轮流行动。爱丽丝先手开局。</p><p>最初，黑板上有一个数字  N 。在每个玩家的回合，玩家需要执行以下操作：</p><p>选出任一  x，满足  0 &lt; x &lt; N 且  N % x == 0 。<br>用 N - x  替换黑板上的数字 N 。<br>如果玩家无法执行这些操作，就会输掉游戏。</p><p>只有在爱丽丝在游戏中取得胜利时才返回  True，否则返回 False。假设两个玩家都以最佳状态参与游戏。</p><h1 id="二、示例"><a href="#二、示例" class="headerlink" title="二、示例"></a>二、示例</h1><p>示例 1:</p><blockquote><p>输入：2<br>输出：true<br>解释：爱丽丝选择 1，鲍勃无法进行操作。</p></blockquote><p>示例 2:</p><blockquote><p>输入：3<br>输出：false<br>解释：爱丽丝选择 1，鲍勃也选择 1，然后爱丽丝无法进行操作。</p></blockquote><h1 id="三、解题"><a href="#三、解题" class="headerlink" title="三、解题"></a>三、解题</h1><p>语言：javascript</p><p>思路：爱丽丝拿到偶数必定胜利、拿到奇数必定失败</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">/** * @param {number} N * @return {boolean} */</span><span class="token keyword">var</span> divisorGame <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> N <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的LeetCode之旅「两数相加」</title>
      <link href="/wo-de-leetcode-zhi-lu-liang-shu-xiang-jia/"/>
      <url>/wo-de-leetcode-zhi-lu-liang-shu-xiang-jia/</url>
      
        <content type="html"><![CDATA[<h1 id="一、题目描述"><a href="#一、题目描述" class="headerlink" title="一、题目描述"></a>一、题目描述</h1><p>给出两个   非空 的链表用来表示两个非负的整数。其中，它们各自的位数是按照   逆序   的方式存储的，并且它们的每个节点只能存储   一位   数字。</p><p>如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。</p><p>您可以假设除了数字 0 之外，这两个数都不会以 0  开头。</p><h1 id="二、示例"><a href="#二、示例" class="headerlink" title="二、示例"></a>二、示例</h1><blockquote><p>输入：(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>输出：7 -&gt; 0 -&gt; 8<br>原因：342 + 465 = 807</p></blockquote><h1 id="三、解题"><a href="#三、解题" class="headerlink" title="三、解题"></a>三、解题</h1><p>语言：javascript</p><p>思路：循环两个链表，挨个取出其中的 val，同时组装成一个链表的数据结构。</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">/** * @param {ListNode} l1 * @param {ListNode} l2 * @return {ListNode} */</span><span class="token keyword">const</span> addTwoNumbers <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>l1<span class="token punctuation">,</span> l2<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> carry <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 是否需要进位</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">(</span>next <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 最终返回的结果</span>  <span class="token comment" spellcheck="true">// 循环，直到 l1 和 l2 同时为 null</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>l1 <span class="token operator">||</span> l2<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> v <span class="token operator">=</span> carry <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 本轮的计算相加的变量 v（上一轮需要进位，所以可能初始值为1）</span>    carry <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 重置</span>    <span class="token comment" spellcheck="true">// 如果 l1 不为空，v 追加 l1.val，同时将 l1.next 覆盖当前作用域的 l1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>l1<span class="token punctuation">)</span> <span class="token punctuation">(</span>v <span class="token operator">+</span><span class="token operator">=</span> l1<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>l1 <span class="token operator">=</span> l1<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 同上</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>l2<span class="token punctuation">)</span> <span class="token punctuation">(</span>v <span class="token operator">+</span><span class="token operator">=</span> l2<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>l2 <span class="token operator">=</span> l2<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>    next<span class="token punctuation">.</span>val <span class="token operator">=</span> v <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 取余数</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// 因为本轮计算结果大于等于10，需要进位</span>      <span class="token comment" spellcheck="true">// 所以将下一个链表中值修改成 1</span>      next <span class="token operator">=</span> next<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>      carry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      next <span class="token operator">=</span> next<span class="token punctuation">.</span>next <span class="token operator">=</span> l1 <span class="token operator">||</span> l2<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的LeetCode之旅「两数之和」</title>
      <link href="/wo-de-leetcode-zhi-lu-liang-shu-zhi-he/"/>
      <url>/wo-de-leetcode-zhi-lu-liang-shu-zhi-he/</url>
      
        <content type="html"><![CDATA[<h1 id="一、题目描述"><a href="#一、题目描述" class="headerlink" title="一、题目描述"></a>一、题目描述</h1><p>给定一个整数数组 nums  和一个目标值 target，请你在该数组中找出和为目标值的那两个整数，并返回他们的数组下标。</p><p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素不能使用两遍。</p><h1 id="二、示例"><a href="#二、示例" class="headerlink" title="二、示例"></a>二、示例</h1><blockquote><p>给定 nums = [2, 7, 11, 15], target = 9</p><p>因为 nums[0] + nums[1] = 2 + 7 = 9<br>所以返回 [0, 1]</p></blockquote><h1 id="三、解题"><a href="#三、解题" class="headerlink" title="三、解题"></a>三、解题</h1><p>语言：javascript</p><p>思路：遍历 <code>nums</code>，用 <code>target</code> 数值与数组 <code>nums</code> 中每个数值相减获得到另一个数值，如果这个数值刚好存在<code>nums</code> 中，则返回。</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">/** * @param {number[]} nums * @param {number} target * @return {number[]} */</span><span class="token keyword">const</span> twoSum <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 遍历 `nums` 数组</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 求目标减去当前索引的数值</span>    <span class="token keyword">let</span> disc <span class="token operator">=</span> target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 查找 `nums` 数组中是否存在这个值</span>    <span class="token keyword">let</span> idx <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>disc<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!==</span> i <span class="token operator">&amp;&amp;</span> idx <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>disc<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>什么是作用域？</title>
      <link href="/shi-me-shi-zuo-yong-yu/"/>
      <url>/shi-me-shi-zuo-yong-yu/</url>
      
        <content type="html"><![CDATA[<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><hr><p>作用域在 JavaScript 中是个一直是个老生长谈的话题，因为涉及到到原理非常深，知识点非常广，困扰着无数新手前端，我就是其中一个。恰好最近读了《你不知道的 JavaScript》这本书，书中的第一章节就介绍了 JavaScript 的作用域，作者用着非常生动的文字和拟人的手法，描述了 JavaScript 执行过程中：引擎、编译器和作用域分别扮演的不同角色与职责，使我这个理解能力稍弱的人，都能完全掌握。</p><h1 id="二、编译原理"><a href="#二、编译原理" class="headerlink" title="二、编译原理"></a>二、编译原理</h1><hr><p>了解过编译原理的同学可能都会知道，大多数编程语言在执行前，一般要经过：词法分析、语法分析、代码优化、生成中间码或生成指定平台的 CPU 指令（这里对编译的流程的解释过于粗略，后面打算专门几篇文章来梳理编译原理）。</p><p>那么为什么我要简单聊一下编译过程呢？这就和 JavaScript 语言的特殊性息息相关了，我们通常把 JavaScript 认为是“解释型”语言，但归根结底它还是一门编译语言，只不过它的某些环节变的相当复杂。比如，它的构建过程是在执行前的几微秒内发生的（甚至更短），所以 JavaScript 引擎用尽各种方法（比如 JIT，可以延迟编译）来保证性能最佳。</p><p>简单来说，任何 JavaScript 代码片段在执行前都需要进行编译（通常就是在执行前）。那么你可能会问了，这个高深莫测的编译原理和我今天讨论的主题有什么关联呢？我们先怀揣着疑问，继续看下去。</p><h1 id="三、理解作用域"><a href="#三、理解作用域" class="headerlink" title="三、理解作用域"></a>三、理解作用域</h1><hr><h2 id="3-1-嘉宾表"><a href="#3-1-嘉宾表" class="headerlink" title="3.1 嘉宾表"></a>3.1 嘉宾表</h2><p>下面邀请出今晚最重要的三位嘉宾，它们分别是：引擎、编译器和作用域，掌声欢迎。</p><p>我叫引擎，执行 JavaScript 可少不了我的存在，我负责 JavaScript 编译、优化、执行的全过程。</p><p>我叫编译器，是引擎大哥的最重要的助手，在接到引擎大哥交给我的 JavaScript 代码片段之后，我会立刻将其转换成 AST（抽象语法树）。在把 AST 交给引擎大哥前，我还会与作用域先生（那个家伙脾气可不太好）一起协调确认作用域规则。</p><p>我叫作用域，我有很多兄弟，我们的脾气很不好，因为编译器总是会问我，“你有没有见过变量 a”、“你有没有见过函数 foo”等之类的问题，通常如果我见过就会返回这个变量，如果从来没见过的话，就会给编译器脸色看（抛出一个异常）。</p><h2 id="3-2-作用域"><a href="#3-2-作用域" class="headerlink" title="3.2 作用域"></a>3.2 作用域</h2><p>在正式理解作用域之前，我们得先了解一下这个概念————编译器的 LHS RHS，也就是 JavaScript 是如何变量声明和赋值。</p><p>当出现赋值操作时，编译器会使用 LHS 方法沿着作用域链，从当前作用域到顶层作用域中挨个查询目标，如果一直没有找到该目标，则会抛出异常（ReferenceError）程序就不会再往下执行，请看下面的例子：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre><p>当引擎去执行这段代码的时候，其实分成了两步：<br>第一步：编译器在把代码转换成 AST 树后，引擎会为 a 当前所在的作用域内开辟一个名为 a 的容器（通常作用域在执行前确定）。<br>第二步：接着编译器会使用 LHS 规则去查找这个名为 a 的容器，最后给这个名为 a 的容器赋值。</p><p>当出现取值操作时，编译器会使用 RHS 方法沿着作用域链，从当前作用域到顶层作用域中挨个查询目标，如果一直没有找到该目标，则会跑出异常（ReferenceError）程序就不会再往下执行，请看下面的例子：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>从 <code>foo(a);</code> 这行代码开始，首先会按 RHS 规则查询 foo，如果查询成功，则继续查询 a，如果查询成功将 a 的值映射到 foo 函数的 arguments[0] ，于是执行 <code>console.log(b);</code>。其实这里的 <code>console.log</code> 也会按照 RHS 的规则查找当前作用域中是否存在 <code>console</code>，以此类推，继续查找 <code>console.log</code>;</p><h2 id="3-3-作用域嵌套"><a href="#3-3-作用域嵌套" class="headerlink" title="3.3 作用域嵌套"></a>3.3 作用域嵌套</h2><p>作用域还存在作用域嵌套的问题，比如 <code>foo</code> 就嵌套在全局作用域当中，<code>boo</code> 嵌套在 <code>foo</code> 的函数作用域中，我们看下面这段代码：</p><pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> b <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">boo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> c <span class="token operator">=</span> b <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">boo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这段代码的执行结果最终是什么呢？答案是 <code>1, 3, 9</code>, 虽然 foo 函数内部和 boo 函数内部都有名称为 c 的变量名，但是根据作用域的规则，它总是取离他最近的那个变量。所以外层的 c 会被里层的 c 所覆盖。但是在严格模式下，这种行为不被允许。</p><h1 id="四、小结"><a href="#四、小结" class="headerlink" title="四、小结"></a>四、小结</h1><ul><li>通常作用域在 JavaScript 引擎执行代码片段前，且一经确认则不会再发生改变</li><li>作用域与 JavaScript 编译器的两种查询规则紧密配合： LHS、RHS</li><li>作用域存在作用域嵌套问题，变量同名的情况下，内部的优先级高于外部的优先级</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 作用域 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript 工程配置</title>
      <link href="/typescript-gong-cheng-pei-zhi/"/>
      <url>/typescript-gong-cheng-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="一、文件选项配置"><a href="#一、文件选项配置" class="headerlink" title="一、文件选项配置"></a>一、文件选项配置</h1><hr><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.base.json"</span><span class="token punctuation">,</span> // 继承其他配置文件 可以被覆盖  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/a.ts"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> // 编译器需要编译的单个文件列表  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"src"</span><span class="token punctuation">,</span> // 编译器只编译src下的文件（包含子目录）    <span class="token string">"src/*"</span><span class="token punctuation">,</span> // 编译器只编译src一级目录下的文件    <span class="token string">"src/*/*"</span> // 编译器只编译src下二级目录下的文件  <span class="token punctuation">]</span><span class="token punctuation">,</span> // 编译器需要编译的文件或目录（包含子目录）列表  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"src/lib"</span> // 只排除src/lib所有文件  <span class="token punctuation">]</span><span class="token punctuation">,</span> // 编译器需要排除的文件或文件夹（默认排除node_module和其他声明文件）  <span class="token property">"compileOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span> // 保存时自动编译（vscode尚未支持 <span class="token number">2020.02</span>.<span class="token number">03</span>）<span class="token punctuation">}</span></code></pre><h1 id="二、编译选项配置"><a href="#二、编译选项配置" class="headerlink" title="二、编译选项配置"></a>二、编译选项配置</h1><hr><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"incremental"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 增量编译，提高编译速度    <span class="token property">"tsBuildInfoFile"</span><span class="token operator">:</span> <span class="token string">"./buildFile"</span><span class="token punctuation">,</span> // 增量编译文件的存储位置    <span class="token property">"diagnostics"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 打印诊断信息    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span> // 目标语言的版本    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span> // 生成代码的模块标准    <span class="token property">"outFile"</span><span class="token operator">:</span> <span class="token string">"./app.js"</span><span class="token punctuation">,</span> // 将多个互相依赖的文件生成一个文件，可以用在 AMD 模块中    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"es2019.array"</span><span class="token punctuation">,</span> // 导入此类库，可以使用高版本的语法    <span class="token punctuation">]</span><span class="token punctuation">,</span> // TS 需要引用的库，即声明文件，es5 默认 <span class="token string">"dom"</span><span class="token punctuation">,</span> <span class="token string">"es5"</span><span class="token punctuation">,</span> <span class="token string">"scripthost"</span>    <span class="token property">"allowJs"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 允许编译 JS 文件 （js、jsx）    <span class="token property">"checkJs"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 允许在 JS 文件中报错，通常与 allowJs 一起使用    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./out"</span><span class="token punctuation">,</span><span class="token punctuation">,</span> // 指定输出目录    <span class="token property">"rootDir"</span><span class="token operator">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span> // 指定输入文件目录（用于输出）    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 生成声明文件    <span class="token property">"declarationDir"</span><span class="token operator">:</span> <span class="token string">"./d"</span><span class="token punctuation">,</span> // 声明文件的路径    <span class="token property">"emitDeclarationOnly"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 只生成声明文件    <span class="token property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 生成目标文件的 sourceMap    <span class="token property">"inlineSourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 生成目标文件的 inline sourceMap    <span class="token property">"declarationMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 生成声明文件的 sourceMap    <span class="token property">"typeRoots"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> // 声明文件目录，默认 node_module/@types    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> // 只加载某个声明包文件列表    <span class="token property">"removeComments"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 删除注释    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 不输出文件    <span class="token property">"noEmitOnError"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 发生错误时，不输出文件    <span class="token property">"noEmitHelpers"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 不生成 helper 函数，需额外安装 ts-helpers    <span class="token property">"importHelps"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 通过 tslib 引入 helper 函数，文件必须是模块    <span class="token property">"downlevelIteration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 降级遍历器的实现（es3/<span class="token number">5</span>）    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 开启所有严格的类型检查    <span class="token property">"alwaysStrict"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 在代码中主入 <span class="token string">"use strict"</span>    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 不允许隐式的 any 类型    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 不允许把 <span class="token null">null</span>、undefined 赋值给其他类型变量    <span class="token property">"strictPropertyInitalization"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 类实例属性必须 初始化    <span class="token property">"strictBindCallAppy"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 严格的 bind/call/apply 检查    <span class="token property">"noImplicitThis"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // 不允许 this 有隐式的 any 类型    <span class="token property">"noUnuserLocals"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 检查只声明，未使用的局部变量    <span class="token property">"noUnusedParameters"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> //  检查未使用的函数参数    <span class="token property">"noFallthroughCasesInSwitch"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 防止 switch 语句贯穿    <span class="token property">"noImplicitReturns"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 每个分支都要有返回值    <span class="token property">"esMoudleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 允许 export = 导出，由 import from 导入    <span class="token property">"allowUmdGlobalAccess"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 允许在模块中放访问 UMD 全局变量    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span> // 模块解析策略    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span> // 解析非相对模块的基地址    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"jquery"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"node_modules/jquery/dist/jquery.slim.min.js"</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> // 为jquery指定一个精简的文件    <span class="token property">"rootDirs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"out"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> // 将多个目录放在一个虚拟目录下，用于运行时    <span class="token property">"listEmittedFiles"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 打印输出文件    <span class="token property">"listFiles"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 打印编译的文件（包括引用的声明文件）  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="三、工程引用"><a href="#三、工程引用" class="headerlink" title="三、工程引用"></a>三、工程引用</h1><hr><blockquote><p>场景：在一个代码仓库中，存放多个需要单独构建的工程。<br>例如一个全栈工程，有客户端和服务端，提取出共一些公用的代码，存放到一个公共文件夹下。</p></blockquote><pre><code>├─src --------------------------------------------- // 项目代码│ ├─client ---------------------------------------- // 客户端│ │ ├─index.ts ------------------------------------ // 客户端示例文件│ │ └─tsconfig.json ------------------------------- // 客户端配置文件│ ├─common ---------------------------------------- // 公共│ │ ├─index.ts ------------------------------------ // 公共示例文件│ │ └─tsconfig.json ------------------------------- // 公共配置文件│ ├─server ---------------------------------------- // 服务端│ │  ├─index.ts ----------------------------------- // 服务端示例文件│ │  └─tsconfig.json ------------------------------ // 服务端配置文件├─test -------------------------------------------- // 测试用例│ ├─client.test.ts -------------------------------- // 客户端测试用例│ ├─server.test.ts -------------------------------- // 服务端测试用例│ └─tsconfig.json --------------------------------- // 测试用例配置文件└─tsconfig.json ------------------------------------// 整个项目的配置</code></pre><h2 id="3-1-整个项目的配置"><a href="#3-1-整个项目的配置" class="headerlink" title="3.1 整个项目的配置"></a>3.1 整个项目的配置</h2><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"composit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // 工程可以被引用，可以增量编译    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3-2-客户端配置文件"><a href="#3-2-客户端配置文件" class="headerlink" title="3.2 客户端配置文件"></a>3.2 客户端配置文件</h2><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"../../tsconfig.json"</span><span class="token punctuation">,</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"../../dist/client"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"references"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../common"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h2 id="3-3-服务端配置文件"><a href="#3-3-服务端配置文件" class="headerlink" title="3.3 服务端配置文件"></a>3.3 服务端配置文件</h2><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"../../tsconfig.json"</span><span class="token punctuation">,</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"../../dist/server"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"references"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../common"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h2 id="3-4-测试用例配置文件"><a href="#3-4-测试用例配置文件" class="headerlink" title="3.4 测试用例配置文件"></a>3.4 测试用例配置文件</h2><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"../tsconfig.json"</span><span class="token punctuation">,</span>  <span class="token property">"references"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../src/client"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../src/server"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h2 id="3-5-构建"><a href="#3-5-构建" class="headerlink" title="3.5 构建"></a>3.5 构建</h2><pre class=" language-bash"><code class="language-bash">tsc -b src/client --verbose // 构建客户端tsc -b src/server --verbose // 构建服务端tsc -b <span class="token function">test</span> --clean // 清空构建的文件</code></pre><h2 id="3-6-工程引用优点"><a href="#3-6-工程引用优点" class="headerlink" title="3.6 工程引用优点"></a>3.6 工程引用优点</h2><ul><li>解决输出目录结构的问题</li><li>解决了单个工程构建的问题</li><li>通过增量编译提高编译速度</li></ul><h1 id="四、编译工具"><a href="#四、编译工具" class="headerlink" title="四、编译工具"></a>四、编译工具</h1><hr><h2 id="4-1-如何选择-TypeScript-编译工具？"><a href="#4-1-如何选择-TypeScript-编译工具？" class="headerlink" title="4.1 如何选择 TypeScript 编译工具？"></a>4.1 如何选择 TypeScript 编译工具？</h2><ol><li>如果没有使用过 Babel，首选 TypeScript 自生的编译器（可配合 ts-loader 使用）</li><li>如果项目中已经使用了 Babel，安装 @bable/preset-typescript（可配合 tsc 做类型检查）</li><li>两种编译工具不要混用</li></ol><h2 id="4-2-ts-loader（推荐）"><a href="#4-2-ts-loader（推荐）" class="headerlink" title="4.2 ts-loader（推荐）"></a>4.2 ts-loader（推荐）</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// webpack.base.config.js</span><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ForkTsCheckerWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fork-ts-checker-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  entry<span class="token punctuation">:</span> <span class="token string">"./src/class.ts"</span><span class="token punctuation">,</span>  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>    filename<span class="token punctuation">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">".js"</span><span class="token punctuation">,</span> <span class="token string">".ts"</span><span class="token punctuation">,</span> <span class="token string">".tsx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/i</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            loader<span class="token punctuation">:</span> <span class="token string">"ts-loader"</span><span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>              transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 为true时只做语言转换，不做类型检查（编译时无法发现错误，需要借助第三方插件：fork-ts-checker-webpack-plugin）</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      template<span class="token punctuation">:</span> <span class="token string">"./src/tpl/index.html"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="4-3-awesome-typescript-loader（不推荐）"><a href="#4-3-awesome-typescript-loader（不推荐）" class="headerlink" title="4.3 awesome-typescript-loader（不推荐）"></a>4.3 awesome-typescript-loader（不推荐）</h2><blockquote><p>与 ts-loader 的主要区别：</p><ol><li>更适合与 Babel 集成，使用 Babel 的转义和缓存</li><li>不需要安装额外的插件，就可以把类型检查放在独立进程中进行</li></ol></blockquote><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token punctuation">{</span> CheckerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"awesome-typescript-loader"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  entry<span class="token punctuation">:</span> <span class="token string">"./src/class.ts"</span><span class="token punctuation">,</span>  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>    filename<span class="token punctuation">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">".js"</span><span class="token punctuation">,</span> <span class="token string">".ts"</span><span class="token punctuation">,</span> <span class="token string">".tsx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/i</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            loader<span class="token punctuation">:</span> <span class="token string">"awesome-typescript-loader"</span><span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>              transpileOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      template<span class="token punctuation">:</span> <span class="token string">"./src/tpl/index.html"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">new</span> <span class="token class-name">CheckerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="4-4-Babel-7"><a href="#4-4-Babel-7" class="headerlink" title="4.4 Babel 7+"></a>4.4 Babel 7+</h2><pre class=" language-json"><code class="language-json">// package.json<span class="token punctuation">{</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ts-babel-leaning"</span><span class="token punctuation">,</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"babel src --out-dir dist --extensions \".ts,.tsx\""</span><span class="token punctuation">,</span>    <span class="token property">"type-check"</span><span class="token operator">:</span> <span class="token string">"tsc --watch"</span> // 需要单独开启一个线程，执行ts类型检查  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"@babel/cli"</span><span class="token operator">:</span> <span class="token string">"^7.8.4"</span><span class="token punctuation">,</span>    <span class="token property">"@babel/core"</span><span class="token operator">:</span> <span class="token string">"^7.8.4"</span><span class="token punctuation">,</span>    <span class="token property">"@babel/plugin-proposal-class-properties"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>    <span class="token property">"@babel/plugin-proposal-object-rest-spread"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>    <span class="token property">"@babel/preset-env"</span><span class="token operator">:</span> <span class="token string">"^7.8.4"</span><span class="token punctuation">,</span>    <span class="token property">"@babel/preset-typescript"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>    <span class="token property">"typescript"</span><span class="token operator">:</span> <span class="token string">"^3.7.5"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-json"><code class="language-json">// tsconfig.json<span class="token punctuation">{</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span> // 与 Babel 混用时，此选项请开启  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4-4-1-Babel-与-TypeScript-两者结合"><a href="#4-4-1-Babel-与-TypeScript-两者结合" class="headerlink" title="4.4.1 Babel 与 TypeScript 两者结合"></a>4.4.1 Babel 与 TypeScript 两者结合</h3><blockquote><p>Babel 只做语言转换<br>TypeScript 只做类型检查</p></blockquote><h3 id="4-4-2-在-Babel-中使用-TypeScript-的注意事项"><a href="#4-4-2-在-Babel-中使用-TypeScript-的注意事项" class="headerlink" title="4.4.2 在 Babel 中使用 TypeScript 的注意事项"></a>4.4.2 在 Babel 中使用 TypeScript 的注意事项</h3><ol><li>命名空间在 Babel 中编译会报错，不要使用</li><li>类型断言写法使用 as</li><li>常量枚举，编译报错</li><li>默认导出，编译报错</li></ol><h1 id="五、代码检查工具"><a href="#五、代码检查工具" class="headerlink" title="五、代码检查工具"></a>五、代码检查工具</h1><hr><h2 id="5-1-ESLint"><a href="#5-1-ESLint" class="headerlink" title="5.1 ESLint"></a>5.1 ESLint</h2><p><img src="https://i.loli.net/2020/06/26/Gp2QmlDX7uWIzKV.jpg" alt="ESLint.jpg"></p><p><img src="https://i.loli.net/2020/06/26/AagbK6kjqeBI9FV.jpg" alt="ESLint.jpg"></p><p><img src="https://i.loli.net/2020/06/26/HfmKGColOe4rAwJ.jpg" alt="ESLint.jpg"></p><h2 id="5-2-如何在-TypesSript-中使用-ESLint"><a href="#5-2-如何在-TypesSript-中使用-ESLint" class="headerlink" title="5.2 如何在 TypesSript 中使用 ESLint"></a>5.2 如何在 TypesSript 中使用 ESLint</h2><h3 id="5-2-1-安装-ESLint-模块"><a href="#5-2-1-安装-ESLint-模块" class="headerlink" title="5.2.1 安装 ESLint 模块"></a>5.2.1 安装 ESLint 模块</h3><h4 id="在-package-json-文件中"><a href="#在-package-json-文件中" class="headerlink" title="在 package.json 文件中"></a>在 package.json 文件中</h4><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint src --ext .js,.ts"</span> // 检查 .js .ts 文件  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"@typescript-eslint/eslint-plugin"</span><span class="token operator">:</span> <span class="token string">"^2.19.0"</span><span class="token punctuation">,</span>    <span class="token property">"@typescript-eslint/parser"</span><span class="token operator">:</span> <span class="token string">"^2.19.0"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="在-eslintrc-json-文件中"><a href="#在-eslintrc-json-文件中" class="headerlink" title="在 .eslintrc.json 文件中"></a>在 .eslintrc.json 文件中</h4><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span>  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@typescript-eslint"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"project"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.json"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"@typescript-eslint/no-inferrable-types"</span><span class="token operator">:</span> <span class="token string">"off"</span> // 关闭禁止显示的声明ts类型  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5-2-2-安装-VSCode-ESLint-插件"><a href="#5-2-2-安装-VSCode-ESLint-插件" class="headerlink" title="5.2.2 安装 VSCode ESLint 插件"></a>5.2.2 安装 VSCode ESLint 插件</h3><h4 id="在-setting-json-文件中"><a href="#在-setting-json-文件中" class="headerlink" title="在 setting.json 文件中"></a>在 setting.json 文件中</h4><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"eslint.autoFixOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token property">"eslint.validate"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"javascript"</span><span class="token punctuation">,</span>    <span class="token string">"javascriptreact"</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"typescript"</span><span class="token punctuation">,</span>      <span class="token property">"autoFix"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">,</span>      <span class="token property">"autoFix"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"vue"</span><span class="token punctuation">,</span>      <span class="token property">"autoFix"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h2 id="5-3-babel-eslint-与-typescript-eslint"><a href="#5-3-babel-eslint-与-typescript-eslint" class="headerlink" title="5.3 babel-eslint 与 typescript-eslint"></a>5.3 babel-eslint 与 typescript-eslint</h2><ul><li>babel-eslint: 支持 TypeScript 没有的额外的语法检查，抛弃 TypeScript，不支持类型检查</li><li>typescript-eslint：基于 TypeScript 的 AST，支持创建基于类型信息的规则（tsconfig.json）</li></ul><p><strong>建议：</strong></p><ul><li>两者底层机制不一样，不要一起使用</li><li>Babel 体系建议使用 babel-eslint，否则就可以使用 typescript-eslint</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript 基础语法</title>
      <link href="/typescript-ji-chu-yu-fa/"/>
      <url>/typescript-ji-chu-yu-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="一、开始一个项目"><a href="#一、开始一个项目" class="headerlink" title="一、开始一个项目"></a>一、开始一个项目</h1><h2 id="1-1-安装模块"><a href="#1-1-安装模块" class="headerlink" title="1.1 安装模块"></a>1.1 安装模块</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 初始化项目</span><span class="token function">npm</span> init -y<span class="token comment" spellcheck="true"># 全局安装 ts</span><span class="token function">npm</span> i -g typescript<span class="token comment" spellcheck="true"># 初始化ts配置文件</span>tsc --init<span class="token comment" spellcheck="true"># 安装 webpack</span><span class="token function">npm</span> i webpack webpack-cli webpack-dev-server -D<span class="token comment" spellcheck="true"># 安装 ts-loader 再次在当前项目中安装 typescript</span><span class="token function">npm</span> i ts-loader typescript -D<span class="token comment" spellcheck="true"># 安装  html-webpack-plugin 当使用 webpack打包时，创建一个 html 文件，并把 webpack 打包后的静态文件自动插入到这个 html 文件当中。</span><span class="token function">npm</span> <span class="token function">install</span> html-webpack-plugin -D<span class="token comment" spellcheck="true"># 安装 clean-webpack-plugin -D 可以帮助我们清空打包时产生的无用文件</span><span class="token function">npm</span> i clean-webpack-plugin -D<span class="token comment" spellcheck="true"># 安装 webpack-merge -D 可以帮助我们合并多个文件</span><span class="token function">npm</span> i webpack-merge -D</code></pre><h2 id="1-2-配置-package-json"><a href="#1-2-配置-package-json" class="headerlink" title="1.2 配置 package.json"></a>1.2 配置 package.json</h2><pre class=" language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --mode=development --config ./build/webpack.config.js"</span><span class="token punctuation">,</span> // 开发环境启动脚本  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode=product --config ./build/webpack.config.js"</span> // 构建生产环境脚本<span class="token punctuation">}</span></code></pre><h1 id="二、对比-TS-数据类型与-ES6-数据类型"><a href="#二、对比-TS-数据类型与-ES6-数据类型" class="headerlink" title="二、对比 TS 数据类型与 ES6 数据类型"></a>二、对比 TS 数据类型与 ES6 数据类型</h1><hr><table><thead><tr><th>ES6 的数据类型</th><th>TypeScript 的数据类型</th></tr></thead><tbody><tr><td>Boolean</td><td>Boolean</td></tr><tr><td>Number</td><td>Number</td></tr><tr><td>String</td><td>String</td></tr><tr><td>Array</td><td>Array</td></tr><tr><td>Function</td><td>Function</td></tr><tr><td>Object</td><td>Object</td></tr><tr><td>Symbol</td><td>Symbol</td></tr><tr><td>undefined</td><td>undefined</td></tr><tr><td>null</td><td>null</td></tr><tr><td></td><td><strong>void</strong></td></tr><tr><td></td><td><strong>any</strong></td></tr><tr><td></td><td><strong>never</strong></td></tr><tr><td></td><td><strong>元组</strong></td></tr><tr><td></td><td><strong>枚举</strong></td></tr><tr><td></td><td><strong>高级类型</strong></td></tr></tbody></table><h1 id="三、数据类型"><a href="#三、数据类型" class="headerlink" title="三、数据类型"></a>三、数据类型</h1><hr><h2 id="3-1-基本类型"><a href="#3-1-基本类型" class="headerlink" title="3.1 基本类型"></a>3.1 基本类型</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 原始类型</span><span class="token keyword">let</span> bool<span class="token punctuation">:</span> <span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span><span class="token keyword">let</span> num<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">let</span> str<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 数组</span><span class="token keyword">let</span> arr1<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 只能存number</span><span class="token comment" spellcheck="true">// 泛型：联合类型 可以存 number 和 string</span><span class="token keyword">let</span> arr2<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token operator">&lt;</span><span class="token keyword">number</span> <span class="token operator">|</span> <span class="token keyword">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 元组 只能存放 两个类型一致的元素（实际开发中不建议使用）</span><span class="token keyword">let</span> tuple<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">number</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>tuple<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [0, "1", 2]</span>tuple<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  ERROR：无法访问</span><span class="token comment" spellcheck="true">// 函数</span><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 函数定义</span><span class="token keyword">let</span> compute<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 对象</span><span class="token keyword">let</span> obj<span class="token punctuation">:</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  ERROR：不能分配属性</span><span class="token keyword">let</span> obj<span class="token punctuation">:</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span><span class="token comment" spellcheck="true">// symbol</span><span class="token keyword">let</span> s1<span class="token punctuation">:</span> symbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// fasle</span><span class="token comment" spellcheck="true">// undefined, null</span><span class="token keyword">let</span> un<span class="token punctuation">:</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span><span class="token keyword">let</span> empty<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>un <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 不允许</span>empty <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 不允许</span><span class="token comment" spellcheck="true">// void 避免 undefined值被污染</span><span class="token comment" spellcheck="true">// js中 undefined 可以被设置为一个指定的值</span><span class="token keyword">let</span> noReturn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// any</span><span class="token keyword">let</span> x<span class="token punctuation">;</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// never</span><span class="token comment" spellcheck="true">// 永远不会返回</span><span class="token keyword">let</span> error <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> endless <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="3-2-枚举类型"><a href="#3-2-枚举类型" class="headerlink" title="3.2 枚举类型"></a>3.2 枚举类型</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 数字枚举</span><span class="token keyword">enum</span> Role <span class="token punctuation">{</span>  Developer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  Guest<span class="token punctuation">,</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Role<span class="token punctuation">.</span>Developer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Role<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// { "Developer": 1, "Guest": 2, 1: "Developer", 2: "Guest"}</span>Role<span class="token punctuation">.</span>Guest <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  ERROR：无法修改</span><span class="token comment" spellcheck="true">// 字符串枚举</span><span class="token keyword">enum</span> Message <span class="token punctuation">{</span>  Success <span class="token operator">=</span> <span class="token string">"成功"</span><span class="token punctuation">,</span>  Fail <span class="token operator">=</span> <span class="token string">"失败"</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 异构枚举（不建议使用）</span><span class="token keyword">enum</span> Answer <span class="token punctuation">{</span>  N <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  Y <span class="token operator">=</span> <span class="token string">"yes"</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 枚举成员</span><span class="token keyword">enum</span> Char <span class="token punctuation">{</span>  a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  b <span class="token operator">=</span> Char<span class="token punctuation">.</span>a<span class="token punctuation">,</span>  c <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span>  d <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  e <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>  f<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//  ERROR：必须具有初始值</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 常量枚举</span><span class="token comment" spellcheck="true">// 不需要枚举对象，而只需要使用枚举对象的值时候，可以使用</span><span class="token keyword">const</span> <span class="token keyword">enum</span> Month <span class="token punctuation">{</span>  Jan<span class="token punctuation">,</span>  Feb<span class="token punctuation">,</span>  Mar<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 枚举类型</span><span class="token keyword">enum</span> E <span class="token punctuation">{</span>  a<span class="token punctuation">,</span>  b<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">enum</span> F <span class="token punctuation">{</span>  a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">enum</span> G <span class="token punctuation">{</span>  A <span class="token operator">=</span> <span class="token string">"apple"</span><span class="token punctuation">,</span>  b <span class="token operator">=</span> <span class="token string">"banana"</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">let</span> e<span class="token punctuation">:</span> E <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">let</span> f<span class="token punctuation">:</span> F <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>e <span class="token operator">===</span> f<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  ERROR：不同枚举类型不可比较</span><span class="token keyword">let</span> e1<span class="token punctuation">:</span> E<span class="token punctuation">.</span>a<span class="token punctuation">;</span><span class="token keyword">let</span> e2<span class="token punctuation">:</span> E<span class="token punctuation">.</span>b<span class="token punctuation">;</span>e1 <span class="token operator">===</span> e2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ERROR：不同枚举类型不可比较</span><span class="token keyword">let</span> e3<span class="token punctuation">:</span> E<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>e1 <span class="token operator">===</span> e3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span><span class="token keyword">let</span> g1<span class="token punctuation">:</span> G <span class="token operator">=</span> G<span class="token punctuation">.</span>b<span class="token punctuation">;</span><span class="token keyword">let</span> g2<span class="token punctuation">:</span> G<span class="token punctuation">.</span>a <span class="token operator">=</span> G<span class="token punctuation">.</span>a<span class="token punctuation">;</span></code></pre><h2 id="3-3-接口类型"><a href="#3-3-接口类型" class="headerlink" title="3.3 接口类型"></a>3.3 接口类型</h2><h3 id="3-3-1-对象类型接口"><a href="#3-3-1-对象类型接口" class="headerlink" title="3.3.1 对象类型接口"></a>3.3.1 对象类型接口</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 定义接口 List</span><span class="token keyword">interface</span> <span class="token class-name">List</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 定义接口 Result</span><span class="token keyword">interface</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>  data<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>result<span class="token punctuation">:</span> Result<span class="token punctuation">)</span> <span class="token punctuation">{</span>  result<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"A"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"B"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">"male"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 增加的 sex 不会报错，符合鸭式变形法</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">render</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="3-3-1-1-鸭式变形法"><a href="#3-3-1-1-鸭式变形法" class="headerlink" title="3.3.1.1 鸭式变形法"></a>3.3.1.1 鸭式变形法</h4><blockquote><p>只要传入的数据格式满足接口定义的必要条件也是可以允许的。</p></blockquote><p>当然也有例外，请看下面：</p><pre class=" language-typescript"><code class="language-typescript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"A"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"B"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">"male"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ERROR：如果直接传入对象自变量，TS则会对额外的字段进行类型检查</span></code></pre><h4 id="3-3-1-2-有三种绕过方式"><a href="#3-3-1-2-有三种绕过方式" class="headerlink" title="3.3.1.2 有三种绕过方式"></a>3.3.1.2 有三种绕过方式</h4><ol><li>加类型断言</li><li>用变量传递</li><li>索引签名</li></ol><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 方法1 加类型断言</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"A"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"B"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">"male"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span> as Result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 方法2 用变量传递</span><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"A"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"B"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">"male"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">render</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 方法3 索引签名</span><span class="token keyword">interface</span> <span class="token class-name">List</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 含义，用任意的字符串去索引 List，这样可以支持多个属性</span><span class="token punctuation">}</span></code></pre><h4 id="3-3-1-3-假设有个新需求"><a href="#3-3-1-3-假设有个新需求" class="headerlink" title="3.3.1.3 假设有个新需求"></a>3.3.1.3 假设有个新需求</h4><blockquote><p>需要判断一个对象中是否有一个新字段（age），如果有则打印出来</p></blockquote><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 定义接口 List</span><span class="token keyword">interface</span> <span class="token class-name">List</span> <span class="token punctuation">{</span>  readonly id<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 含义，只读，不可修改</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 含义，可选属性，这个属性可以有也可以没有</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 定义接口 Result</span><span class="token keyword">interface</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>  data<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>result<span class="token punctuation">:</span> Result<span class="token punctuation">)</span> <span class="token punctuation">{</span>  result<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span> value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    value<span class="token punctuation">.</span>id<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 报错，不可修改</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"A"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"B"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">render</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="3-3-1-3-索引签名"><a href="#3-3-1-3-索引签名" class="headerlink" title="3.3.1.3 索引签名"></a>3.3.1.3 索引签名</h4><blockquote><p>我们可以明确的指定索引签名。例如：假设你想确认存储在对象中任何内容都符合  { message: string }  的结构，你可以通过  [index: string]: { message: string }  来实现。</p></blockquote><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>  <span class="token punctuation">[</span>index<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 储存的东西必须符合结构 ok</span>foo<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">"some message"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ERROR：必须包含 `message`</span>foo<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> abc<span class="token punctuation">:</span> <span class="token string">"some message"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>tip：</strong></p><blockquote><p>[index: string]: { message: string }; 里的  index 除了可读性外，并没有任何意义。例如：如果有一个用户名，你可以使用  { username: string}: { message: string }，这有利于下一个开发者理解你的代码。</p></blockquote><p>节选自：<a href="https://jkchao.github.io/typescript-book-chinese/typings/indexSignatures.html#typescript-%E7%B4%A2%E5%BC%95%E7%AD%BE%E5%90%8D" target="_blank" rel="noopener">深入理解 TypeScript - 索引签名</a></p><h3 id="3-3-2-函数类型接口"><a href="#3-3-2-函数类型接口" class="headerlink" title="3.3.2 函数类型接口"></a>3.3.2 函数类型接口</h3><h4 id="3-3-2-1-声明"><a href="#3-3-2-1-声明" class="headerlink" title="3.3.2.1 声明"></a>3.3.2.1 声明</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 声明函数的四种方式</span><span class="token comment" spellcheck="true">// 函数定义</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 变量定义函数类型</span><span class="token keyword">let</span> add<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 接口定义函数类型</span><span class="token keyword">interface</span> <span class="token class-name">Add</span> <span class="token punctuation">{</span>  <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 类型别名定义函数类型</span>type Add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 定义</span><span class="token keyword">let</span> add<span class="token punctuation">:</span> Add <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></code></pre><h4 id="3-3-2-2-可选参数"><a href="#3-3-2-2-可选参数" class="headerlink" title="3.3.2.2 可选参数"></a>3.3.2.2 可选参数</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> y <span class="token operator">?</span> x <span class="token operator">+</span> y <span class="token punctuation">:</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3</span><span class="token comment" spellcheck="true">// ERROR：必选参数不能位于可选参数之后</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> y <span class="token operator">?</span> x <span class="token operator">+</span> y <span class="token punctuation">:</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="3-3-2-3-默认值"><a href="#3-3-2-3-默认值" class="headerlink" title="3.3.2.3 默认值"></a>3.3.2.3 默认值</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> q <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> y <span class="token operator">+</span> x <span class="token operator">+</span> z <span class="token operator">+</span> q<span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 5</span></code></pre><h4 id="3-3-2-4-剩余参数"><a href="#3-3-2-4-剩余参数" class="headerlink" title="3.3.2.4 剩余参数"></a>3.3.2.4 剩余参数</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    x <span class="token operator">+</span>    rest<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> pre <span class="token operator">+</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 15</span></code></pre><h4 id="3-3-2-5-函数重载"><a href="#3-3-2-5-函数重载" class="headerlink" title="3.3.2.5 函数重载"></a>3.3.2.5 函数重载</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> first <span class="token operator">=</span> rest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> first <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> rest<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> first <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> rest<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> pre <span class="token operator">+</span> cur<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 6</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// "abc"</span></code></pre><h2 id="3-4-类"><a href="#3-4-类" class="headerlink" title="3.4 类"></a>3.4 类</h2><h3 id="3-4-1-基本知识"><a href="#3-4-1-基本知识" class="headerlink" title="3.4.1 基本知识"></a>3.4.1 基本知识</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 必须在构造函数中被初始化，默认 public</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token function">pri</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">protected</span> <span class="token function">pro</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  readonly legs<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 只读，必须给初始值</span>  <span class="token keyword">static</span> food<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"bones"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 只能通过类名调用</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 实例化 Dog</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"wangwang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">pri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ERROR：无法调用私有属性</span>dog<span class="token punctuation">.</span><span class="token function">pro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ERROR: 无法调用</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Dog<span class="token punctuation">.</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'bones'</span><span class="token keyword">class</span> <span class="token class-name">Husky</span> <span class="token keyword">extends</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 必须加上</span>    <span class="token comment" spellcheck="true">// this 必须在 super 之后调用</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ERROR：无法调用私有属性</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>  <span class="token punctuation">}</span>  color<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 默认 public</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Husky<span class="token punctuation">.</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'bones'</span></code></pre><blockquote><p>构造函数设置为 protected，说明这个类只能被继承，而不能被实例化。<br>构造函数设置为 private，说明这个类不能被继承，不能被实例化。</p></blockquote><h3 id="3-4-2-抽象类——多态特性"><a href="#3-4-2-抽象类——多态特性" class="headerlink" title="3.4.2 抽象类——多态特性"></a>3.4.2 抽象类——多态特性</h3><pre class=" language-typescript"><code class="language-typescript">abstract <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  abstract <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// let animal = new Animal(); // Error：无法实例化</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"dog sleep"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"cat sleep"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"wangcai"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"dema"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> animals<span class="token punctuation">:</span> Animal<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>dog<span class="token punctuation">,</span> cat<span class="token punctuation">]</span><span class="token punctuation">;</span>animals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  i<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/**   * dog sleep   * cat sleep   */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="3-4-3-链式调用"><a href="#3-4-3-链式调用" class="headerlink" title="3.4.3 链式调用"></a>3.4.3 链式调用</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">WorkFlow</span> <span class="token punctuation">{</span>  <span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">new</span> <span class="token class-name">WorkFlow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span><span class="token keyword">class</span> <span class="token class-name">MyFlow</span> <span class="token keyword">extends</span> <span class="token class-name">WorkFlow</span> <span class="token punctuation">{</span>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">new</span> <span class="token class-name">MyFlow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span></code></pre><h2 id="3-5-类与接口的关系"><a href="#3-5-类与接口的关系" class="headerlink" title="3.5 类与接口的关系"></a>3.5 类与接口的关系</h2><p><img src="https://i.loli.net/2020/06/26/doJnDwsM3qIr7O1.jpg" alt="类与接口的关系.jpg"></p><h3 id="3-5-1-接口只能约束类的公有成员"><a href="#3-5-1-接口只能约束类的公有成员" class="headerlink" title="3.5.1 接口只能约束类的公有成员"></a>3.5.1 接口只能约束类的公有成员</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Asian</span> <span class="token keyword">implements</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 必须实现</span>  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 必须实现</span><span class="token punctuation">}</span></code></pre><h3 id="3-5-2-一个类类型接口可以继承多个接口"><a href="#3-5-2-一个类类型接口可以继承多个接口" class="headerlink" title="3.5.2 一个类类型接口可以继承多个接口"></a>3.5.2 一个类类型接口可以继承多个接口</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Man</span> <span class="token keyword">extends</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Child</span> <span class="token punctuation">{</span>  <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Boy</span> <span class="token keyword">extends</span> <span class="token class-name">Man</span><span class="token punctuation">,</span> Child <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">let</span> boy<span class="token punctuation">:</span> Boy <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="3-5-3-接口继承类"><a href="#3-5-3-接口继承类" class="headerlink" title="3.5.3 接口继承类"></a>3.5.3 接口继承类</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Auto</span> <span class="token punctuation">{</span>  state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">AutoInterface</span> <span class="token keyword">extends</span> <span class="token class-name">Auto</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">implements</span> <span class="token class-name">AutoInterface</span> <span class="token punctuation">{</span>  state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h1 id="四、泛型"><a href="#四、泛型" class="headerlink" title="四、泛型"></a>四、泛型</h1><hr><h2 id="4-1-泛型函数与泛型接口"><a href="#4-1-泛型函数与泛型接口" class="headerlink" title="4.1 泛型函数与泛型接口"></a>4.1 泛型函数与泛型接口</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 泛型函数</span><span class="token keyword">function</span> log<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> value<span class="token punctuation">;</span><span class="token punctuation">}</span>log<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 类型定义</span>type Log <span class="token operator">=</span> <span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> T<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 泛型接口定义</span><span class="token keyword">interface</span> <span class="token class-name">Log</span><span class="token operator">&lt;</span>T <span class="token operator">=</span> <span class="token keyword">string</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token punctuation">(</span>value<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="4-2-泛型类与泛型约束"><a href="#4-2-泛型类与泛型约束" class="headerlink" title="4.2 泛型类与泛型约束"></a>4.2 泛型类与泛型约束</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 泛型类</span><span class="token keyword">class</span> <span class="token class-name">Log</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token function">run</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> value<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 指定number类型</span><span class="token keyword">let</span> log1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Log</span><span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log1<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 指定string类型</span><span class="token keyword">let</span> log2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Log</span><span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log2<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 不指定类型</span><span class="token keyword">let</span> log2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log2<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log2<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 定义接口</span><span class="token keyword">interface</span> <span class="token class-name">Length</span> <span class="token punctuation">{</span>  length<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 继承Length，只能传入有length的属性的值</span><span class="token keyword">function</span> log<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">Length</span><span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> value<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="4-3-泛型的好处"><a href="#4-3-泛型的好处" class="headerlink" title="4.3 泛型的好处"></a>4.3 泛型的好处</h2><ol><li>函数和类可以轻松地支持多种类型，增强程序的拓展性</li><li>不必写多条函数重载，冗长的联合类型声明，增强代码可读性</li><li>灵活控制类型之前的约束</li></ol><h1 id="五、类型检查机制"><a href="#五、类型检查机制" class="headerlink" title="五、类型检查机制"></a>五、类型检查机制</h1><hr><h2 id="5-1-自动类型推断"><a href="#5-1-自动类型推断" class="headerlink" title="5.1 自动类型推断"></a>5.1 自动类型推断</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 自动推断a为number</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 自动推断 b 为 []any</span></code></pre><h2 id="5-2-类型兼容性"><a href="#5-2-类型兼容性" class="headerlink" title="5.2 类型兼容性"></a>5.2 类型兼容性</h2><h5 id="当一个类型-Y-可以被赋值给另一个类型-X-时，我们就可以说类型-X-兼容类型-Y-X-兼容-Y-X-目标类型-Y（源类型）"><a href="#当一个类型-Y-可以被赋值给另一个类型-X-时，我们就可以说类型-X-兼容类型-Y-X-兼容-Y-X-目标类型-Y（源类型）" class="headerlink" title="当一个类型 Y 可以被赋值给另一个类型 X 时，我们就可以说类型 X 兼容类型 Y X 兼容 Y : X (目标类型) = Y（源类型）"></a>当一个类型 Y 可以被赋值给另一个类型 X 时，我们就可以说类型 X 兼容类型 Y X 兼容 Y : X (目标类型) = Y（源类型）</h5><h5 id="口诀："><a href="#口诀：" class="headerlink" title="口诀："></a>口诀：</h5><ol><li>结构之间兼容：成员少的兼容成员多的</li><li>函数之间兼容：参数多的兼容参数少的</li></ol><h3 id="5-2-1-变量兼容性"><a href="#5-2-1-变量兼容性" class="headerlink" title="5.2.1 变量兼容性"></a>5.2.1 变量兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> s<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span>s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></code></pre><h3 id="5-2-2-接口兼容性"><a href="#5-2-2-接口兼容性" class="headerlink" title="5.2.2 接口兼容性"></a>5.2.2 接口兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 接口兼容性</span><span class="token keyword">interface</span> <span class="token class-name">X</span> <span class="token punctuation">{</span>  a<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>  b<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Y</span> <span class="token punctuation">{</span>  a<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>  b<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>  c<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> x<span class="token punctuation">:</span> X <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> y<span class="token punctuation">:</span> Y <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span><span class="token comment" spellcheck="true">// y = x; // Error 不兼容</span></code></pre><blockquote><p>结论：属性少的兼容属性多的</p></blockquote><h3 id="5-2-3-函数兼容性"><a href="#5-2-3-函数兼容性" class="headerlink" title="5.2.3 函数兼容性"></a>5.2.3 函数兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">/**  * 结论：参数多的兼容参数少的  */</span><span class="token comment" spellcheck="true">// 函数兼容性</span>type Handler <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">void</span><span class="token keyword">function</span> <span class="token function">hor</span><span class="token punctuation">(</span>handler<span class="token punctuation">:</span> Handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> handler<span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 1. 参数个数</span><span class="token keyword">let</span> handler1 <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">hor</span><span class="token punctuation">(</span>hander1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> handler2 <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// hor(handler2); // Error 超出形参个数</span><span class="token comment" spellcheck="true">// 2. 可选参数和剩余参数</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>p1<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> p2<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">(</span>p1<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> p2<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>a <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// b = c; // Error</span><span class="token comment" spellcheck="true">// b = a; // Error</span><span class="token comment" spellcheck="true">// 通过修改 tsconfig.json >> "strictFunctionTypes": false</span>b <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>c <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>c <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// 3. 参数类型</span><span class="token keyword">let</span> handler3 <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// hor(handler3); // Error 类型不匹配</span><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span>    x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>    y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token punctuation">{</span>    x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>    y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>    z<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> p2d <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token punctuation">:</span> Point2D<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> p3d <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token punctuation">:</span> Point3D<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>p3d <span class="token operator">=</span> p2d<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ok</span><span class="token comment" spellcheck="true">// p2d = p3d: // Error</span><span class="token comment" spellcheck="true">// 通过修改 tsconfig.json >> "strictFunctionTypes": false</span>p2d <span class="token operator">=</span> p3d<span class="token punctuation">:</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// 4. 返回值类型</span><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Alice'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">'man'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>f <span class="token operator">=</span> g<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// g = f; // Error 不满足</span><span class="token comment" spellcheck="true">// 函数重载兼容</span><span class="token keyword">function</span> <span class="token function">overload</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">overload</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">overload</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span></code></pre><h3 id="5-2-4-枚举兼容性"><a href="#5-2-4-枚举兼容性" class="headerlink" title="5.2.4 枚举兼容性"></a>5.2.4 枚举兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 枚举兼容性</span><span class="token keyword">enum</span> Fruit <span class="token punctuation">{</span>  Apple<span class="token punctuation">,</span>  Banana<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>  Red<span class="token punctuation">,</span>  Yellow<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">let</span> fruit<span class="token punctuation">:</span> Fruit<span class="token punctuation">.</span>Apple <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">let</span> no<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> Fruit<span class="token punctuation">.</span>Apple<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// let color: Color.Red = Fruit.Apple; // Error 不兼容</span></code></pre><h3 id="5-2-5-类兼容性"><a href="#5-2-5-类兼容性" class="headerlink" title="5.2.5 类兼容性"></a>5.2.5 类兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 类兼容性</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> q<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    id<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>    <span class="token keyword">static</span> s <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    id<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token keyword">let</span> aa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>aa <span class="token operator">=</span> bb<span class="token punctuation">;</span>bb <span class="token operator">=</span> aa<span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">/**  * 类中含有私有成员，互相不兼容  */</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> q<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    id<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>    <span class="token keyword">static</span> s <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    id<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">2</span>    <span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token keyword">let</span> aa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// aa = bb; // Error</span><span class="token comment" spellcheck="true">// bb = aa; // Error</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">let</span> cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>aa <span class="token operator">=</span> cc<span class="token punctuation">;</span>cc <span class="token operator">=</span> aa<span class="token punctuation">;</span></code></pre><h3 id="5-2-6-泛型兼容性"><a href="#5-2-6-泛型兼容性" class="headerlink" title="5.2.6 泛型兼容性"></a>5.2.6 泛型兼容性</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 泛型接口</span><span class="token keyword">interface</span> <span class="token class-name">Empty</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>  value<span class="token punctuation">:</span> T<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj1<span class="token punctuation">:</span> Empty<span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj2<span class="token punctuation">:</span> Empty<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// obj1 = obj2; // Error</span><span class="token comment" spellcheck="true">// 泛型函数</span><span class="token keyword">let</span> log1 <span class="token operator">=</span> <span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> T <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> log2 <span class="token operator">=</span> <span class="token operator">&lt;</span>U<span class="token operator">></span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> U<span class="token punctuation">)</span><span class="token punctuation">:</span> U <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>log1 <span class="token operator">=</span> log2<span class="token punctuation">;</span></code></pre><h2 id="5-3-类型保护机制"><a href="#5-3-类型保护机制" class="headerlink" title="5.3 类型保护机制"></a>5.3 类型保护机制</h2><p>TypeScript 能够在特定的区块中保证变量属于某种确定的类型。<br>可以在此区块中放心地引用此类型的属性，或调用此类型的方法。</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Type <span class="token punctuation">{</span> Strong<span class="token punctuation">,</span> Week <span class="token punctuation">}</span> <span class="token keyword">class</span> <span class="token class-name">Java</span> <span class="token punctuation">{</span>    <span class="token function">helloJava</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello java'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    java<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token punctuation">}</span>  <span class="token keyword">class</span> <span class="token class-name">JavaScript</span> <span class="token punctuation">{</span>    <span class="token function">helloJavaScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello JavaScript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    javascript<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 4. 类型保护函数</span> <span class="token comment" spellcheck="true">// 返回值类型 => “lang is Java” 叫做：类型谓词</span> <span class="token keyword">function</span> <span class="token function">isJava</span><span class="token punctuation">(</span>lang<span class="token punctuation">:</span> Java <span class="token operator">|</span> JavaScript<span class="token punctuation">)</span><span class="token punctuation">:</span> lang is Java <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>lang as Java<span class="token punctuation">)</span><span class="token punctuation">.</span>helloJava <span class="token operator">!==</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token keyword">function</span> <span class="token function">getLanguage</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Type<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> lang <span class="token operator">=</span> type <span class="token operator">===</span> Type<span class="token punctuation">.</span>Strong <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Java</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">JavaScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 此处无法满足需要</span>    <span class="token comment" spellcheck="true">// if (lang.helloJava) {</span>    <span class="token comment" spellcheck="true">//    lang.helloJava();</span>    <span class="token comment" spellcheck="true">// } else (lang.helloJavaScript) {</span>    <span class="token comment" spellcheck="true">//    lang.helloJavaScript();</span>    <span class="token comment" spellcheck="true">// }</span>    <span class="token comment" spellcheck="true">// 制造一个区块</span>    <span class="token comment" spellcheck="true">// 1. instanceof 关键字</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lang <span class="token keyword">instanceof</span> <span class="token class-name">Java</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJava</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJavaScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 2. in 关键字</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'java'</span> <span class="token keyword">in</span> lang<span class="token punctuation">)</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJava</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJavaScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 3. typeof 关键字</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        x<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 4. 类型保护函数</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isJava</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJava</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        lang<span class="token punctuation">.</span><span class="token function">helloJavaScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> lang <span class="token punctuation">}</span> <span class="token function">getLanguage</span><span class="token punctuation">(</span>Type<span class="token punctuation">.</span>Strong<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="六、高级类型"><a href="#六、高级类型" class="headerlink" title="六、高级类型"></a>六、高级类型</h1><hr><h2 id="6-1-交叉类型与联合类型"><a href="#6-1-交叉类型与联合类型" class="headerlink" title="6.1 交叉类型与联合类型"></a>6.1 交叉类型与联合类型</h2><p>交叉类型：适合做对象混入<br>联合类型：类型具有不确定性，增强代码的灵活性</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">DogInterface</span> <span class="token punctuation">{</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">CatInterface</span> <span class="token punctuation">{</span>  <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> pet<span class="token punctuation">:</span> DogInterface <span class="token operator">&amp;</span> CatInterface <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">|</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">|</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// 取值只能在 a,b,c 中</span><span class="token keyword">let</span> b<span class="token punctuation">:</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">DogInterface</span> <span class="token punctuation">{</span>  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">CatInterface</span> <span class="token punctuation">{</span>  <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">enum</span> Master <span class="token punctuation">{</span>  Boy<span class="token punctuation">,</span>  Girl<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">getPet</span><span class="token punctuation">(</span>master<span class="token punctuation">:</span> Master<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> pet <span class="token operator">=</span> master <span class="token operator">===</span> Master<span class="token punctuation">.</span>Boy <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pet<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// pet.run(); // Error</span>  <span class="token comment" spellcheck="true">// pet.jump(); // Error</span>  <span class="token keyword">return</span> pet<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>  kind<span class="token punctuation">:</span> <span class="token string">"square"</span><span class="token punctuation">;</span>  size<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>  kind<span class="token punctuation">:</span> <span class="token string">"rectangle"</span><span class="token punctuation">;</span>  width<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  height<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>  kind<span class="token punctuation">:</span> <span class="token string">"circle"</span><span class="token punctuation">;</span>  r<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span>type Shape <span class="token operator">=</span> Square <span class="token operator">|</span> Rectangle <span class="token operator">|</span> Circle<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">case</span> <span class="token string">"square"</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">"rectangle"</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> s<span class="token punctuation">.</span>height<span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">"circle"</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> s<span class="token punctuation">.</span>r <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">:</span> never<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="6-2-索引类型"><a href="#6-2-索引类型" class="headerlink" title="6.2 索引类型"></a>6.2 索引类型</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getValues</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> value<span class="token punctuation">,</span> keys<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> keys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getValues</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1, 2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getValues</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"f"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined, undefined</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// 如何约束数组的元素</span><span class="token comment" spellcheck="true">// 下面来改造以下函数</span><span class="token keyword">function</span> getValues<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token class-name">keyof</span> T<span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> T<span class="token punctuation">,</span> keys<span class="token punctuation">:</span> K<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">[</span>K<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> keys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getValues</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// console.log(getValues(obj, ['e', 'f'])); // Error</span></code></pre><h2 id="6-3-映射类型"><a href="#6-3-映射类型" class="headerlink" title="6.3 映射类型"></a>6.3 映射类型</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Obj</span> <span class="token punctuation">{</span>  a<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  b<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  c<span class="token punctuation">:</span> <span class="token keyword">boolean</span><span class="token punctuation">;</span><span class="token punctuation">}</span>type ReadonlyObj <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Obj<span class="token operator">></span><span class="token punctuation">;</span>type PartialObj <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Obj<span class="token operator">></span><span class="token punctuation">;</span>type PickObj <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span><span class="token operator">></span><span class="token punctuation">;</span>type RecordObj <span class="token operator">=</span> Record<span class="token operator">&lt;</span><span class="token string">"x"</span> <span class="token operator">|</span> <span class="token string">"y"</span><span class="token punctuation">,</span> Obj<span class="token operator">></span><span class="token punctuation">;</span></code></pre><h2 id="6-4-条件类型"><a href="#6-4-条件类型" class="headerlink" title="6.4 条件类型"></a>6.4 条件类型</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// T extends U ? X : Y</span>type TypeName<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">=</span> T <span class="token keyword">extends</span> <span class="token class-name">string</span>  <span class="token operator">?</span> <span class="token string">"string"</span>  <span class="token punctuation">:</span> T <span class="token keyword">extends</span> <span class="token class-name">number</span>  <span class="token operator">?</span> <span class="token string">"number"</span>  <span class="token punctuation">:</span> T <span class="token keyword">extends</span> <span class="token class-name">boolean</span>  <span class="token operator">?</span> <span class="token string">"boolean"</span>  <span class="token punctuation">:</span> T <span class="token keyword">extends</span> <span class="token class-name">undefined</span>  <span class="token operator">?</span> <span class="token string">"undefined"</span>  <span class="token punctuation">:</span> T <span class="token keyword">extends</span> <span class="token class-name">Function</span>  <span class="token operator">?</span> <span class="token string">"function"</span>  <span class="token punctuation">:</span> <span class="token string">"object"</span><span class="token punctuation">;</span>type T1 <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// T1类型是 string</span>type T2 <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// T1类型是 object</span><span class="token comment" spellcheck="true">// ( A | B ) extends U ? X : Y</span><span class="token comment" spellcheck="true">// ( A extends U ? X : Y ) | ( B extends U ? X : Y )</span>type T3 <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token keyword">string</span> <span class="token operator">|</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>type Diff<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token operator">=</span> T <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> never <span class="token punctuation">:</span> T<span class="token punctuation">;</span>type T4 <span class="token operator">=</span> Diff<span class="token operator">&lt;</span><span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"e"</span><span class="token operator">></span><span class="token punctuation">;</span>type NotNull<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">=</span> Diff<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> undefined <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">></span><span class="token punctuation">;</span>type T5 <span class="token operator">=</span> NotNull<span class="token operator">&lt;</span><span class="token keyword">string</span> <span class="token operator">|</span> <span class="token keyword">number</span> <span class="token operator">|</span> undefined <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 官方预置的：</span><span class="token comment" spellcheck="true">// Exclude&lt;T, U></span><span class="token comment" spellcheck="true">// NonNullable&lt;T></span><span class="token comment" spellcheck="true">// Extract&lt;T, U></span>type Y7 <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> stringn<span class="token operator">></span><span class="token punctuation">;</span></code></pre><h1 id="七、ES6-与-CommonJS-的模块系统"><a href="#七、ES6-与-CommonJS-的模块系统" class="headerlink" title="七、ES6 与 CommonJS 的模块系统"></a>七、ES6 与 CommonJS 的模块系统</h1><hr><h2 id="7-1-两种模式不要混用"><a href="#7-1-两种模式不要混用" class="headerlink" title="7.1 两种模式不要混用"></a>7.1 两种模式不要混用</h2><ol><li>ES6</li><li>CommonJS</li></ol><h1 id="八、命名空间"><a href="#八、命名空间" class="headerlink" title="八、命名空间"></a>八、命名空间</h1><hr><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// a.ts</span>namespace Shape <span class="token punctuation">{</span>  <span class="token keyword">const</span> pi <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cricle</span><span class="token punctuation">(</span>r<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> pi <span class="token operator">*</span> r <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// b.ts</span><span class="token comment" spellcheck="true">/** * 下面是三斜线指令 * 在 b.ts 调用 a.ts 的 cricle 方法 必须加上此指令 */</span><span class="token comment" spellcheck="true">/// &lt;reference path="a.ts" /></span>namespace Shape <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Shape<span class="token punctuation">.</span><span class="token function">cricle</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 12.56 共享命名空间</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Shape<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// underfined 命名空间内的属性必须导出才能访问</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Shape<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 4  共享命名空间</span><span class="token comment" spellcheck="true">/** * 为了使得写法更加简便 * 可以使用此写法 * 此写法和模块没有关系 */</span><span class="token keyword">import</span> cricle <span class="token operator">=</span> Shape<span class="token punctuation">.</span>cricle<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">cricle</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3.14</span></code></pre><h1 id="九、声明合并"><a href="#九、声明合并" class="headerlink" title="九、声明合并"></a>九、声明合并</h1><hr><h2 id="9-1-接口合并"><a href="#9-1-接口合并" class="headerlink" title="9.1 接口合并"></a>9.1 接口合并</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">/** * 后申明的接口顺序靠前，接口内部函数先声明的靠前 * 函数参数类型为字面量时，优先级最高 */</span><span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>  x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// y: string; // Error</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 函数重载顺序 5</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 函数重载顺序 2</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>  y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 函数重载顺序 3</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 函数重载顺序 4</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 函数重载顺序 1</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 这个变量必须具备这两个接口的所有成员</span><span class="token keyword">let</span> a<span class="token punctuation">:</span> A <span class="token operator">=</span> <span class="token punctuation">{</span>  x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 函数重载</span>    <span class="token keyword">return</span> bar<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="9-2-函数与命名空间合并"><a href="#9-2-函数与命名空间合并" class="headerlink" title="9.2 函数与命名空间合并"></a>9.2 函数与命名空间合并</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">Lib</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>namespace Lib <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">let</span> version <span class="token operator">=</span> <span class="token string">"1.0"</span><span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Lib<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1.0</span></code></pre><h2 id="9-3-类与命名空间合并"><a href="#9-3-类与命名空间合并" class="headerlink" title="9.3 类与命名空间合并"></a>9.3 类与命名空间合并</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>namespace C <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span></code></pre><h2 id="9-4-枚举与命名空间合并"><a href="#9-4-枚举与命名空间合并" class="headerlink" title="9.4 枚举与命名空间合并"></a>9.4 枚举与命名空间合并</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>  Red<span class="token punctuation">,</span>  Yellow<span class="token punctuation">,</span>  Bule<span class="token punctuation">,</span><span class="token punctuation">}</span>namespace Color <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * { *     0: "Red", *     1: "Yellow", *     2: "Bule", *     "Red": 0, *     "Yellow": 1, *     "Blue": 2, *     "mix": f mix () * } */</span></code></pre><h1 id="十、如何编写声明文件"><a href="#十、如何编写声明文件" class="headerlink" title="十、如何编写声明文件"></a>十、如何编写声明文件</h1><hr><p>引入第三方类库并为它们编写声明文件<br>类库分为三种：</p><ol><li>全局类库</li><li>模块类库</li><li>umd 类库</li></ol><h1 id="十一、引入-jQuery"><a href="#十一、引入-jQuery" class="headerlink" title="十一、引入 jQuery"></a>十一、引入 jQuery</h1><hr><h2 id="11-1-安装"><a href="#11-1-安装" class="headerlink" title="11.1 安装"></a>11.1 安装</h2><pre class=" language-cmd"><code class="language-cmd">npm i jquerynpm i @types/jquery -D</code></pre><p>大多数类库都会提供声明文件<br>可以上 <a href="microsoft.github.io/TypeSearch">TypeSearch</a> 去查找社区有没有为类库提供声明文件</p><h2 id="11-2-使用"><a href="#11-2-使用" class="headerlink" title="11.2 使用"></a>11.2 使用</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">"jquery"</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".app"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="十二、如何自己编写一个声明文件"><a href="#十二、如何自己编写一个声明文件" class="headerlink" title="十二、如何自己编写一个声明文件"></a>十二、如何自己编写一个声明文件</h1><hr><blockquote><p>可以参考此网站 <a href="definitelytyped.org/guides/contributing.html">Definitely Typed</a></p></blockquote><h2 id="12-1-全局库"><a href="#12-1-全局库" class="headerlink" title="12.1 全局库"></a>12.1 全局库</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// global-lib.js</span><span class="token keyword">function</span> <span class="token function">globalLib</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>globalLib<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token string">"1.0.0"</span><span class="token punctuation">;</span>globalLib<span class="token punctuation">.</span>doSomething <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"global Lib do something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// global-lib.d.js 声明文件</span><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">globalLib</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span> globalLib<span class="token punctuation">.</span>Options<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token keyword">declare</span> namespace globalLib <span class="token punctuation">{</span>  <span class="token keyword">const</span> version<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>    <span class="token punctuation">[</span>key<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// example.ts 使用示范</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">globalLib</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>globalLib<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="12-2-模块库"><a href="#12-2-模块库" class="headerlink" title="12.2 模块库"></a>12.2 模块库</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// module-lib.js</span><span class="token keyword">function</span> <span class="token function">moduleLib</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>moduleLib<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token string">"1.0.0"</span><span class="token punctuation">;</span>moduleLib<span class="token punctuation">.</span>doSomething <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"moduleLib Lib do something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> moduleLib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// module-lib.d.js 声明文件</span><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">moduleLib</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span> globalLib<span class="token punctuation">.</span>Options<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>  <span class="token punctuation">[</span>key<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">declare</span> namespace moduleLib <span class="token punctuation">{</span>  <span class="token keyword">const</span> version<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token operator">=</span> moduleLib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// example.ts 使用示范</span><span class="token keyword">import</span> moduleLib <span class="token keyword">from</span> <span class="token string">"./module-lib.js"</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>moduleLib<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="12-3-umd-库"><a href="#12-3-umd-库" class="headerlink" title="12.3 umd 库"></a>12.3 umd 库</h2><h5 id="tsconfig-默认不允许-umd-使用全局引用方式，若如果想通过全局引用，则需要打开设置-“allowUmdGlobalAccess”-true"><a href="#tsconfig-默认不允许-umd-使用全局引用方式，若如果想通过全局引用，则需要打开设置-“allowUmdGlobalAccess”-true" class="headerlink" title="tsconfig 默认不允许 umd 使用全局引用方式，若如果想通过全局引用，则需要打开设置 “allowUmdGlobalAccess”: true"></a>tsconfig 默认不允许 umd 使用全局引用方式，若如果想通过全局引用，则需要打开设置 “allowUmdGlobalAccess”: true</h5><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// umd-lib.js</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">"function"</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">define</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">module</span> <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">module</span><span class="token punctuation">.</span>exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    root<span class="token punctuation">.</span>umdLib <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>    version<span class="token punctuation">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"umdLib do something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// umd-lib.d.js 声明文件</span><span class="token keyword">declare</span> namespace umdLib <span class="token punctuation">{</span>  <span class="token keyword">const</span> version<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> as namespace umdLib<span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token operator">=</span> umdLib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// example.ts 使用示范</span><span class="token keyword">import</span> umdLib <span class="token keyword">from</span> <span class="token string">"./umd-lib.js"</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>umdLib<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="12-4-给类库添加自定义方法"><a href="#12-4-给类库添加自定义方法" class="headerlink" title="12.4 给类库添加自定义方法"></a>12.4 给类库添加自定义方法</h2><blockquote><p>这里以 moment 为例</p></blockquote><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">import</span> m <span class="token keyword">from</span> <span class="token string">"moment"</span><span class="token punctuation">;</span><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"moment"</span> <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span>m<span class="token punctuation">.</span>myFunction <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="12-5-声明文件的依赖"><a href="#12-5-声明文件的依赖" class="headerlink" title="12.5 声明文件的依赖"></a>12.5 声明文件的依赖</h2><blockquote><p>这里以 jQuery 为例</p></blockquote><h6 id="node-modules-types-jquery-package-json"><a href="#node-modules-types-jquery-package-json" class="headerlink" title="/node_modules/@types/jquery/package.json"></a>/node_modules/@types/jquery/package.json</h6><pre class=" language-json"><code class="language-json"><span class="token property">"types"</span><span class="token operator">:</span> <span class="token string">"index"</span></code></pre><h6 id="node-modules-types-jquery-index-d-js"><a href="#node-modules-types-jquery-index-d-js" class="headerlink" title="/node_modules/@types/jquery/index.d.js"></a>/node_modules/@types/jquery/index.d.js</h6><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">/// &lt;reference types="sizzle" /></span><span class="token comment" spellcheck="true">/// &lt;reference types="jQueryStatic.d.ts" /></span><span class="token comment" spellcheck="true">/// &lt;reference types="JQuery.d.ts" /></span><span class="token comment" spellcheck="true">/// &lt;reference types="misc.d.ts" /></span><span class="token comment" spellcheck="true">/// &lt;reference types="legacy.d.ts" /></span><span class="token keyword">export</span> <span class="token operator">=</span> jQuery<span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
